Please Login
%form#loginForm(action='${request.contextPath}/j_spring_security_check' method='POST' name='loginForm')
	%p
		%label(for='username') Username:
		%input#username(type='text' autofocus='true' name='j_username')
	%p
		%label(for='password') Password:
		%input#password(type='password' name='j_password')
	%p
		%label(for='rememberMe') Remember me:
		%input#rememberMe(type='checkbox' name='_spring_security_remember_me')/
	%p
		%input(type='submit' value='Login' onclick='ajaxLogin();return false')
		
<%-- allow ajax submit --%>
:javascript
	function ajaxLogin() {
		var form = $('#loginForm')
		$.post(form.attr('action'), form.serialize(), function(data, textStatus, jqXHR){
			if (data.error) alert(data.error + '\nTODO: Get rid of this popup.')
			else if (data.success) location.reload()
		})
	}